let lenis;const marquees=document.querySelectorAll(".marquee"),mm=gsap.matchMedia();function initLenis(){lenis=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,infinite:!1,autoRaf:!0,prevent:e=>e.closest(".modal__scroll")}),window.lenis=lenis,document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=document.querySelector(this.getAttribute("href"));e&&lenis.scrollTo(e)})}),requestAnimationFrame(function e(t){lenis.raf(t),requestAnimationFrame(e)})}function initModals(){var e=document.querySelectorAll("[data-modal-open]:not([data-modal-open^='modal-reviews-'])"),t=document.querySelectorAll("[data-modal-close]"),o=document.querySelectorAll(".modal:not(#dynamic-video-modal)");e.forEach(o=>{o.addEventListener("click",e=>{e.preventDefault();var e=o.getAttribute("data-modal-open"),t=document.getElementById(e);t&&(t.classList.add("is-active"),document.body.classList.add("modal-open"),console.log(`Modal ${e} opened`),lenis.stop())})}),t.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.closest(".modal");e&&(e.classList.remove("is-active"),console.log(`Modal ${e.id} closed`),document.querySelector(".modal.is-active")||(document.body.classList.remove("modal-open"),lenis.start()))})}),o.forEach(t=>{t.addEventListener("click",e=>{e.target===t&&(t.classList.remove("is-active"),console.log(`Modal ${t.id} closed by outside click`),document.querySelector(".modal.is-active")||(document.body.classList.remove("modal-open"),lenis.start()))})})}document.addEventListener("DOMContentLoaded",function(){initLenis(),initModals(),mm.add({isMobile:"(max-width: 699px)",isDesktop:"(min-width: 700px)"},e=>{const o=e.conditions["isDesktop"];marquees.forEach(e=>{var t=e.querySelectorAll(".marquee-item"),e="true"===e.getAttribute("data-reversed");horizontalLoop(t,{repeat:-1,paddingRight:o?40:20,speed:o?.5:.25,reversed:e})})})});const body=document.querySelector("body"),burger=document.querySelector(".burger"),closeButton=document.querySelector(".burger__close"),overlay=document.querySelector(".overlay"),menu=document.querySelectorAll(".mobile__menu"),links=document.querySelectorAll(".mobile__menu .header__nav a"),langLinks=document.querySelectorAll(".language-chooser a");function toggleMobileMenu(){burger.classList.contains("is-active")?(burger.classList.remove("is-active"),overlay.classList.remove("is-active"),closeButton.classList.remove("is-active"),body.classList.remove("overflow"),gsap.to(closeButton,{y:50,autoAlpha:0,duration:.2,ease:"power2.in"}),gsap.to(menu,{y:-100,autoAlpha:0,duration:.2,ease:"power2.in"})):(burger.classList.add("is-active"),overlay.classList.add("is-active"),closeButton.classList.add("is-active"),body.classList.add("overflow"),gsap.to(menu,{y:0,autoAlpha:1,duration:.4,ease:"power2.out"}),gsap.to(closeButton,{y:0,autoAlpha:1,duration:.3,delay:.2,ease:"power2.out"}))}function horizontalLoop(e,t){e=gsap.utils.toArray(e),t=t||{};let s=gsap.timeline({repeat:t.repeat,paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>s.totalTime(s.rawTime()+100*s.duration())}),r=e.length,o=e[0].offsetLeft,i=[],a=[],n=[],l=0,c=100*(t.speed||1),d=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1),u,m,p,g,v,y;for(gsap.set(e,{xPercent:(e,t)=>{var o=a[e]=parseFloat(gsap.getProperty(t,"width","px"));return n[e]=d(parseFloat(gsap.getProperty(t,"x","px"))/o*100+gsap.getProperty(t,"xPercent")),n[e]}}),gsap.set(e,{x:0}),u=e[r-1].offsetLeft+n[r-1]/100*a[r-1]-o+e[r-1].offsetWidth*gsap.getProperty(e[r-1],"scaleX")+(parseFloat(t.paddingRight)||0),y=0;y<r;y++)v=e[y],m=n[y]/100*a[y],g=(p=v.offsetLeft+m-o)+a[y]*gsap.getProperty(v,"scaleX"),s.to(v,{xPercent:d((m-g)/a[y]*100),duration:g/c},0).fromTo(v,{xPercent:d((m-g+u)/a[y]*100)},{xPercent:n[y],duration:(m-g+u-m)/c,immediateRender:!1},g/c).add("label"+y,p/c),i[y]=p/c;function f(e,t){t=t||{},Math.abs(e-l)>r/2&&(e+=e>l?-r:r);let o=gsap.utils.wrap(0,r,e),a=i[o];return a>s.time()!=e>l&&(t.modifiers={time:gsap.utils.wrap(0,s.duration())},a+=s.duration()*(e>l?1:-1)),l=o,t.overwrite=!0,s.tweenTo(a,t)}return s.next=e=>f(l+1,e),s.previous=e=>f(l-1,e),s.current=()=>l,s.toIndex=(e,t)=>f(e,t),s.times=i,s.progress(1,!0).progress(0,!0),t.reversed&&(s.vars.onReverseComplete(),s.reverse()),s}gsap.set(menu,{y:-100,autoAlpha:0}),gsap.set(closeButton,{y:50,autoAlpha:0}),closeButton.addEventListener("click",e=>{e.preventDefault(),toggleMobileMenu()}),burger.addEventListener("click",e=>{e.preventDefault(),toggleMobileMenu()});